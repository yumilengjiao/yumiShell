<template>
  <div class="menu-bar">
    <div class="os-button">
      <button class="designed-button" @click="switchSelfSetting">
        <svg t="1754809635436" class="icon" viewBox="0 0 1035 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="7473" width="30" height="30">
          <path
            d="M834.1248 512l160.914286-160.914286c43.885714-43.885714 43.885714-109.714286 0-153.6L826.810514 29.257143c-36.571429-36.571429-109.714286-36.571429-153.6 0L512.296229 190.171429 358.696229 29.257143c-36.571429-36.571429-109.714286-36.571429-153.6 0L36.867657 197.485714c-43.885714 43.885714-43.885714 109.714286 0 153.6L197.781943 512l-73.142857 65.828571c-7.314286 14.628571-21.942857 21.942857-21.942857 43.885715L7.610514 885.028571c-14.628571 36.571429-7.314286 65.828571 14.628572 95.085715 21.942857 29.257143 51.2 43.885714 80.457143 43.885714 14.628571 0 21.942857 0 36.571428-7.314286l263.314286-95.085714c14.628571-7.314286 29.257143-14.628571 43.885714-29.257143l65.828572-58.514286 160.914285 160.914286c21.942857 21.942857 43.885714 29.257143 80.457143 29.257143s58.514286-14.628571 80.457143-29.257143l168.228571-168.228571c43.885714-43.885714 43.885714-109.714286 0-153.6L834.1248 512z m-80.457143-431.542857c7.314286 0 14.628571 7.314286 14.628572 7.314286l168.228571 168.228571c7.314286 7.314286 7.314286 21.942857 0 29.257143l-58.514286 58.514286L680.5248 146.285714l58.514286-58.514285s0-7.314286 14.628571-7.314286zM197.781943 394.971429l80.457143-80.457143c14.628571-14.628571 14.628571-36.571429 0-43.885715-14.628571-14.628571-36.571429-14.628571-43.885715 0l-80.457142 73.142858-58.514286-51.2c-7.314286-7.314286-7.314286-21.942857 0-29.257143l168.228571-168.228572c7.314286-7.314286 7.314286-7.314286 14.628572-7.314285h21.942857l153.6 160.914285-197.485714 204.8-58.514286-58.514285z m190.171428 446.171428l-7.314285 7.314286-263.314286 95.085714c-7.314286 7.314286-14.628571 0-21.942857-7.314286-7.314286-7.314286-7.314286-7.314286-7.314286-14.628571L183.153371 658.285714c0-7.314286 7.314286-7.314286 7.314286-7.314285l95.085714-95.085715L541.553371 292.571429l87.771429-87.771429 197.485714 197.485714-87.771428 87.771429-256 263.314286-95.085715 87.771428z m541.257143-80.457143l-168.228571 168.228572c-7.314286 7.314286-21.942857 7.314286-29.257143 0l-51.2-51.2 80.457143-80.457143c14.628571-14.628571 14.628571-36.571429 0-51.2-14.628571-14.628571-36.571429-14.628571-43.885714 0l-80.457143 80.457143-58.514286-58.514286 197.485714-197.485714 160.914286 160.914285c0 7.314286 0 21.942857-7.314286 29.257143z"
            p-id="7474"></path>
        </svg>
      </button>
      <button class="designed-button" @click="switchDarkModel" v-show="isDarkMode" circle>
        <svg t="1754546449027" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="3641" width="30" height="30">
          <path
            d="M557.553778 976.355556c-257.265778 0-466.56-207.160889-466.56-464.426667 0-253.923556 206.577778-464.284444 460.501333-464.284445h0.355556c10.766222 0 20.622222 3.953778 25.443555 13.610667 4.878222 9.756444 3.740444 20.394667-2.915555 29.027556-55.722667 72.220444-85.162667 158.108444-85.162667 249.372444 0 225.891556 183.779556 409.386667 409.671111 409.386667l5.248-0.256c10.325333-0.142222 20.977778 5.859556 25.841778 15.644444a28.302222 28.302222 0 0 1-2.915556 30.051556C837.902222 910.08 703.203556 976.355556 557.553778 976.355556zM495.274667 105.016889C299.192889 135.281778 147.882667 306.161778 147.882667 509.809778c0 225.877333 183.779556 409.656889 409.671111 409.656889 108.686222 0 210.403556-42.055111 286.577778-116.977778-231.566222-27.192889-411.804444-224.625778-411.804445-463.36 0-83.427556 21.617778-163.299556 62.947556-234.112z"
            fill="" p-id="3642"></path>
          <path
            d="M578.830222 879.132444c-186.865778 0-345.784889-133.418667-377.841778-317.269333a14.222222 14.222222 0 1 1 28.017778-4.878222c29.681778 170.183111 176.810667 293.703111 349.824 293.703111a14.222222 14.222222 0 1 1 0 28.444444zM209.991111 531.2c-7.537778 0-13.838222-6.997333-14.193778-14.606222-0.312889-6.584889-0.483556-13.795556-0.483555-20.465778 0-7.864889 6.357333-14.492444 14.222222-14.492444s14.222222 6.229333 14.222222 14.094222c0 6.229333 0.170667 13.425778 0.455111 19.584 0.369778 7.850667-5.674667 15.886222-13.525333 15.886222h-0.696889z"
            fill="" p-id="3643"></path>

          <path d="M622.350222 309.930667m-25.344 0a25.344 25.344 0 1 0 50.688 0 25.344 25.344 0 1 0-50.688 0Z" fill=""
            p-id="3644"></path>
          <path d="M787.072 188.273778m-25.344 0a25.344 25.344 0 1 0 50.688 0 25.344 25.344 0 1 0-50.688 0Z" fill=""
            p-id="3645"></path>
          <path d="M731.960889 415.303111m-25.344 0a25.344 25.344 0 1 0 50.688 0 25.344 25.344 0 1 0-50.688 0Z" fill=""
            p-id="3646"></path>
        </svg>
      </button>
      <button class="designed-button" @click="switchDarkModel" v-show="!isDarkMode" circle>

        <svg t="1754553967338" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="4013" width="30" height="30">
          <path
            d="M520.021333 208.284444c-165.987556 0-301.041778 135.04-301.041777 301.027556 0 165.987556 135.04 301.027556 301.041777 301.027556 166.001778 0 301.056-135.025778 301.056-301.027556 0-165.987556-135.054222-301.027556-301.056-301.027556z m0 545.194667c-134.613333 0-244.152889-109.525333-244.152889-244.152889 0-134.627556 109.525333-244.138667 244.152889-244.138666 134.641778 0 244.167111 109.511111 244.167111 244.138666 0 134.641778-109.525333 244.152889-244.167111 244.152889z"
            fill="" p-id="4014"></path>
          <path
            d="M493.027556 317.240889a164.949333 164.949333 0 0 0-141.212445 80.426667 14.250667 14.250667 0 0 0 24.476445 14.535111 136.32 136.32 0 0 1 116.736-66.517334 14.222222 14.222222 0 1 0 0-28.444444zM350.307556 433.265778a14.307556 14.307556 0 0 0-17.095112 10.595555c-2.773333 11.747556-4.323556 19.015111-4.323555 32.284445a14.222222 14.222222 0 1 0 28.444444 0c0-10.183111 1.095111-15.260444 3.569778-25.784889a14.222222 14.222222 0 0 0-10.595555-17.095111zM531.484444 846.222222a28.444444 28.444444 0 0 0-28.444444 28.444445v85.333333a28.444444 28.444444 0 0 0 56.888889 0v-85.333333a28.444444 28.444444 0 0 0-28.444445-28.444445zM531.484444 177.777778a28.444444 28.444444 0 0 0 28.444445-28.444445v-85.333333a28.444444 28.444444 0 0 0-56.888889 0v85.333333a28.444444 28.444444 0 0 0 28.444444 28.444445zM242.56 745.642667l-60.330667 60.330666a28.444444 28.444444 0 1 0 40.220445 40.220445l60.330666-60.330667a28.444444 28.444444 0 1 0-40.220444-40.220444zM775.552 281.315556c7.281778 0 14.549333-2.773333 20.110222-8.334223l60.330667-60.330666a28.444444 28.444444 0 1 0-40.220445-40.220445l-60.330666 60.330667a28.444444 28.444444 0 0 0 20.110222 48.554667zM242.56 272.981333c5.560889 5.560889 12.828444 8.334222 20.110222 8.334223a28.444444 28.444444 0 0 0 20.110222-48.554667l-60.330666-60.330667a28.444444 28.444444 0 1 0-40.220445 40.220445l60.330667 60.330666zM795.662222 745.642667a28.444444 28.444444 0 1 0-40.220444 40.220444l60.330666 60.359111c5.560889 5.560889 12.828444 8.334222 20.110223 8.334222s14.549333-2.773333 20.110222-8.334222c11.093333-11.107556 11.093333-29.112889 0-40.220444l-60.330667-60.359111zM149.333333 490.666667h-85.333333a28.444444 28.444444 0 0 0 0 56.888889h85.333333a28.444444 28.444444 0 0 0 0-56.888889zM960 490.666667h-85.333333a28.444444 28.444444 0 0 0 0 56.888889h85.333333a28.444444 28.444444 0 0 0 0-56.888889z"
            fill="" p-id="4015"></path>
        </svg>
      </button>
      <tiny-button type="primary" :icon="IconMinus" circle @click="minimizeWindow"></tiny-button>
      <tiny-button v-if="isMaximized" type="primary" :icon="IconExpand" circle
        @click="windowedOrFullscreen"></tiny-button>
      <tiny-button v-if="!isMaximized" type="primary" :icon="IconPutAway" circle
        @click="windowedOrFullscreen"></tiny-button>
      <tiny-button type="primary" :icon="IconClose" circle @click="closeWindow"></tiny-button>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref } from 'vue'
//导入三个icon图标的执行函数
import { iconPutAway, iconExpand, iconMinus, iconClose } from '@opentiny/vue-icon'
//三(四)个图标
const IconPutAway = iconPutAway()
const IconExpand = iconExpand()
const IconMinus = iconMinus()
const IconClose = iconClose()
//是否最大化
let isMaximized = ref(false)
//是否黑暗模式
let isDarkMode = ref(false)
//三个图标的回调函数
const closeWindow = () => {
  window.api.closeWindow()
}
const minimizeWindow = () => {
  window.api.minimizeWindow()
}
const windowedOrFullscreen = () => {
  if (!isMaximized.value) {
    window.api.maximizeWindow()
    isMaximized.value = true
  } else {
    window.api.windowedWindow()
    isMaximized.value = false
  }
}
const switchDarkModel = () => {
  // 清除私人定制主题
  document.documentElement.classList.remove('theme')
  isDarkMode.value = !isDarkMode.value
  if (isDarkMode.value) {
    // 切换到黑暗模式
    document.documentElement.classList.add('dark')
  } else {
    document.documentElement.classList.remove('dark')
  }
}
//切换私人定制主题
const switchSelfSetting = () => {
  if (document.documentElement.classList.contains('theme')) {
    document.documentElement.classList.remove('theme')
  } else {
    // 切换到私人定制主题
    document.documentElement.classList.add('theme')
  }
}

</script>

<style scoped lang="scss">
@use '../../styles/variables.scss' as variables;

.menu-bar {
  height: variables.$menu-bar-height;
  background-color: var(--base-menu-background-color);
  -webkit-app-region: drag;

  .os-button {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 5px;

    .tiny-button {
      -webkit-app-region: no-drag;
      margin: 0 2px;
    }

    .designed-button {
      height: 32px;
      width: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0px 2px;
      -webkit-app-region: no-drag;
      aspect-ratio: 1/1;
      border-radius: 50%;
      border: 0;
      background-color: var(--base-button-background-color);


      &:hover {
        cursor: pointer;
        background-color: #b3b3b3;
        transition: all 0.2s ease-in-out;
      }

      svg path {
        fill: var(--base-button-text-color);
      }
    }
  }
}
</style>